<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pretty Puress | Luxury Puress-On Nails</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#800080">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Pretty Puress Admin">
<link rel="apple-touch-icon" href="icon-192.png">

<!-- Social Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>

html {
  scroll-behavior: smooth;
}

body {
font-family: Arial, sans-serif;
  margin: 0;
  background: #fff;
  color: purple;
}

/* ================= NAV BAR ================= */

.navbar {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background: rgba(241,183,241,0.97);
  padding: 14px 25px;
  display: flex;
  gap: 25px;
  z-index: 9999;
  box-shadow: 0 3px 10px rgba(0,0,0,0.15);
}

.navbar a {
  text-decoration: none;
  color: purple;
  font-weight: bold;
}

.navbar a:hover {
  color: purple;
}

/* ================= HERO ================= */

.hero {
  background: linear-gradient(135deg, #f1b7f1, #e8a6e8);
padding: 140px 20px 90px;
  text-align: center;
}

/* LOGO */
.logo {
  max-width: 140px;
  margin-bottom: 20px;
}

/* HERO TEXT */

.hero h1 {
  font-size: 3rem;
  margin-bottom: 16px;
  color: purple;
  letter-spacing: 6px;
  animation: fadeSlide 1.2s ease forwards;
}

.hero-subtitle {
  font-size: 1.2rem;
  color: #5a005a;
  margin-bottom: 40px;
  animation: fadeSlide 1.6s ease forwards;
}

/* HERO BUTTONS */

.hero-buttons {
  display: flex;
  justify-content: center;
  gap: 15px;
  flex-wrap: wrap;
}

/* BUTTON */
.button {
  display: inline-block;
  background: purple;
  color: white;
  padding: 14px 26px;
  border-radius: 6px;
  text-decoration: none;
}

.button.secondary {
  background: transparent;
  border: 2px solid purple;
  color: purple;
}

/* HERO ANIMATION */

@keyframes fadeSlide {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ================= SECTIONS ================= */

section {
  padding: 60px 20px;
  max-width: 1000px;
  margin: auto;
}

/* ================= ORDER INFO ================= */

.order-info {
  border-top: 2px solid #f1b7f1;
  padding-top: 20px;
  text-align: center;
  max-width: 750px;
  margin: 0 auto 40px;
}

.order-info h3 {
  color: #3b003b;
  margin-bottom: 12px;
}

.order-info p {
  margin: 8px 0;
  font-size: 1rem;
  color: #5a005a;
}

.order-info span {
  font-weight: bold;
}

/* ================= FORM ================= */

.form-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
  max-width: 800px;
  margin: 0 auto;
}

.form-full {
  grid-column: span 2;
}

form input,
form textarea,
form select {
  width: 100%;
  padding: 12px;
  border-radius: 8px;
  border: 1px solid #ccc;
}
  form textarea {
  min-height: 120px;
  resize: vertical;
}

form select {
  height: 48px;
}


/* SUBMIT BUTTON */

form button {
  background: purple;
  color: white;
  border: none;
  padding: 14px;
  border-radius: 8px;
  cursor: pointer;
   width: 100%;
  margin: 15px auto 0;
  display: block;
}

form button:hover {
  background: #3b003b;
}

/* ================= GALLERY ================= */

.gallery {
  display: flex;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap;
}

.gallery img {
  width: 250px;
  border-radius: 12px;
  box-shadow: 0 8px 15px rgba(0,0,0,0.1);
  cursor: pointer;
  transition: transform 0.3s ease;
}

.gallery img:hover {
  transform: scale(1.05);
}

/* ================= NAIL SIZING ================= */

.sizing-section {
  background: #f9e6f9;
  padding: 50px 20px;
  border-radius: 15px;
  text-align: center;
  border: 2px solid #e8a6e8;
}

.sizing-section h2 {
  color: #3b003b;
  margin-bottom: 15px;
}

.sizing-section p {
  color: #5a005a;
  max-width: 700px;
  margin: 0 auto 20px;
}

.sizing-image {
  max-width: 400px;
  width: 100%;
  border-radius: 12px;
  box-shadow: 0 6px 15px rgba(0,0,0,0.15);
}

/* ================= LIGHTBOX ================= */

.lightbox {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.9);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10000;
}

.lightbox img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 10px;
}

/* ================= SOCIALS ================= */

.socials {
  text-align: center;
  padding: 25px;
}

.socials a {
  color: #3b003b;
  font-size: 26px;
  margin: 0 12px;
  text-decoration: none;
}

.socials a:hover {
  color: black;
}

/* ================= FOOTER ================= */

footer {
  text-align: center;
  padding: 15px;
  background: #f3f3f3;
}
/* ================= PRICING TIERS ================= */

.pricing-section {
  text-align: center;
  margin-top: 40px;
  scroll-margin-top: 100px;

}

.pricing-section h2 {
  color: purple;
  margin-bottom: 10px;
}

.pricing-subtitle {
  font-size: 14px;
  color: #5a005a;
  margin-bottom: 30px;
}

.pricing-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
}

.pricing-card {
  background: #f9e6f9;
  border-radius: 15px;
  padding: 25px 15px;
  border: 2px solid #e8a6e8;
  box-shadow: 0 5px 12px rgba(0,0,0,0.1);
}

.pricing-card h3 {
  margin-bottom: 10px;
  color: #3b003b;
}

.price {
  font-size: 28px;
  font-weight: bold;
  margin-bottom: 10px;
  color: purple;
}

.pricing-card p {
  font-size: 14px;
  color: #5a005a;
  line-height: 1.4;
}

/* Mobile Pricing Layout */
@media (max-width: 768px) {
  .pricing-grid {
    grid-template-columns: 1fr;
  }
}

/* ================= MOBILE ================= */

@media (max-width: 768px) {

  .hero h1 {
    font-size: 2.2rem;
  }

  .form-grid {
    grid-template-columns: 1fr;
  }

  .form-full {
    grid-column: span 1;
  }

  .navbar {
    flex-wrap: wrap;
  }

}
/* ================= CALCULATOR ================= */

.calculator-box {
  max-width: 1000px;
  width: 100%;
  margin: auto;
  background: #f9e6f9;
  padding: 20px;
  border-radius: 12px;
  border: 2px solid #e8a6e8;
}

.calculator-box select,
.calculator-box input,
.calculator-box button {
  width: 100%;
  padding: 12px;
  margin: 8px 0;
  border-radius: 8px;
  border: 1px solid #ccc;
}

.calculator-box button {
  background: purple;
  color: white;
  border: none;
  font-weight: bold;
}

.calculator-box hr {
  margin: 15px 0;
}

#result {
  margin-top: 12px;
  font-weight: bold;
  color: #3b003b;
}

/* Mobile spacing tweak */
@media (max-width: 600px) {
  .calculator-box {
    padding: 15px;
  }
}

.finger-row {
  display:grid;
  grid-template-columns: repeat(5,1fr);
  gap:8px;
  margin-bottom:15px;
}
.finger-wrap {
  display:flex;
  flex-direction:column;
  align-items:center;
}

.finger-label {
  font-size:12px;
  font-weight:bold;
  margin-bottom:4px;
  color:#5a005a;
}

.finger-row input {
  text-align:center;
  font-weight:bold;
}
.grid-layout {
  display:grid;
  grid-template-columns: repeat(3,1fr);
  gap:20px;
}

/* Mobile stays stacked */
@media(max-width:900px){
  .grid-layout {
    grid-template-columns: 1fr;
  }
}

.admin-card {
  background:#f9e6f9;
  padding:18px;
  border-radius:14px;
  border:2px solid #e8a6e8;
}


</style>
</head>

<body>

<!-- ================= NAV BAR ================= -->

<div class="navbar">
  <a href="#home">Home</a>
  <a href="#order">Order</a>
  <a href="#gallery">Gallery</a>
  <a href="#pricing">Pricing</a>
  <a href="#sizing">Nail Sizing</a>
  <a href="#contact">Contact</a>
</div>

<!-- ================= HERO ================= -->

<header id="home" class="hero">


<h1>PrettyPuress</h1>

<p class="hero-subtitle">
Luxury Custom Puress-On Nails Made For You
</p>

<div class="hero-buttons">
  <a href="#order" class="button">Order Now</a>
  <a href="#gallery" class="button secondary">View Gallery</a>
</div>

</header>

<!-- ================= ORDER INFO ================= -->

<section>

<div class="order-info">

<h3>Luxury Puress-On Nails Made Just For You</h3>

<p>
Every Pretty Puress set is fully customized to match your unique style, personality, and vibe.  
Designed with care. Created with intention. Made to elevate your look.
</p>

<br>

<p><span>Every Order Is Made-To-Order</span></p>
<p>Please allow 1–2 weeks for creation & shipping</p>

<br>

<p><span>Rush Orders</span> — Additional $15</p>
<p><span>Standard Shipping</span> — $8</p>

<br>

<p><span>Sizing Kits Available</span> — $5</p>

<br>

<p><span>Payment Required Prior To Shipping</span></p>
<p>All forms of payment accepted</p>

 <br>

  </div>

<div id="pricing" class="pricing-section">

<h2>Pricing Tiers</h2>
<p class="pricing-subtitle">Base prices shown — final price depends on design complexity</p>

<div class="pricing-grid">

  <!-- TIER 1 -->
  <div class="pricing-card">
    <h3>Tier 1</h3>
    <div class="price">$35+</div>
    <p>
      Solid colors, French tips, simple designs, light accents, or minimal chrome.
    </p>
  </div>

  <!-- TIER 2 -->
  <div class="pricing-card">
    <h3>Tier 2</h3>
    <div class="price">$55+</div>
    <p>
      Hand-painted art, ombré styles, foil, glitter, medium rhinestones, or layered designs.
    </p>
  </div>

  <!-- TIER 3 -->
  <div class="pricing-card">
    <h3>Tier 3</h3>
    <div class="price">$75+</div>
    <p>
      Highly detailed sets, 3D designs, heavy rhinestones, charms, themed or luxury custom sets.
    </p>
  </div>

<br>
</div>


</section>

<!-- ================= ORDER FORM ================= -->

<section id="order">

<h2 style="text-align:center; color: purple;">Custom Nail Order</h2>

<form action="https://formspree.io/f/xqeeyvkq" method="POST">

<input type="hidden" name="_redirect" value="https://prettypuress.com">

<div class="form-grid">


<input type="tel" name="phone" placeholder="Phone Number" required>
<textarea name="address" placeholder="Mailing Address" rows="2" required></textarea>

<select name="tier" class="form-full" required>
<option value="">Select Your Nail Tier</option>
<option value="Tier 1 - $35">Tier 1 — $35</option>
<option value="Tier 2 - $55">Tier 2 — $55</option>
<option value="Tier 3 - $75">Tier 3 — $75</option>
</select>

<!-- Added Length Selection -->
<select name="length" class="form-full" required>
  <option value="">Select Nail Length</option>
  <option value="Short">Short</option>
  <option value="Medium">Medium</option>
  <option value="Long">Long</option>
</select>

<!-- Added Shape Selection -->
<select name="shape" class="form-full" required>
  <option value="">Select Nail Shape</option>
  <option value="Square">Square</option>
  <option value="Coffin">Coffin</option>
  <option value="Almond">Almond</option>
  <option value="Stiletto">Stiletto</option>
  <option value="Oval">Oval</option>
</select>

<textarea name="details" class="form-full" placeholder="Describe your custom nail design" rows="4" required></textarea>

<button type="submit" class="form-full">Submit Order</button>

</div>

</form>

</section>

<!-- ================= GALLERY ================= -->

<section id="gallery">

<h2 style="text-align:center;">Luxury Sets</h2>

<div class="gallery">

<img src="nail1.jpg" onclick="openLightbox(this.src)">
<img src="nail2.jpg" onclick="openLightbox(this.src)">
<img src="nail3.jpg" onclick="openLightbox(this.src)">
<img src="nail4.jpg" onclick="openLightbox(this.src)">
<img src="nail5.jpg" onclick="openLightbox(this.src)">
<img src="nail6.jpg" onclick="openLightbox(this.src)">
<img src="nail7.jpg" onclick="openLightbox(this.src)">
<img src="nail8.jpg" onclick="openLightbox(this.src)">
<img src="nail9.jpg" onclick="openLightbox(this.src)">
<img src="nail10.jpg" onclick="openLightbox(this.src)">
<img src="nail12.jpg" onclick="openLightbox(this.src)">
<img src="nail13.jpg" onclick="openLightbox(this.src)">
<img src="nail14.jpg" onclick="openLightbox(this.src)">
<img src="nail15.jpg" onclick="openLightbox(this.src)">
<img src="nail16.jpg" onclick="openLightbox(this.src)">
<img src="nail17.jpg" onclick="openLightbox(this.src)">





</div>

</section>

<!-- ================= NAIL SIZING SECTION ================= -->

<section id="sizing">

<div class="sizing-section">

<h2>Nail Sizing</h2>

<p>
Don’t want to purchase a sizing kit?  
Use our guide below to measure your nails accurately at home before ordering.
</p>

<img src="coin-sizing.png" alt="Coin Method Nail Sizing Guide" class="sizing-image">

</div>

</section>

<!-- ================= LIGHTBOX ================= -->

<div id="lightbox" class="lightbox" onclick="closeLightbox()">
  <img id="lightbox-img">
</div>

<!-- ================= SOCIAL ================= -->

<div id="contact" class="socials">

<a href="https://instagram.com/PRETTYPURESS" target="_blank">
<i class="fab fa-instagram"></i>
</a>

<a href="https://tiktok.com/@PRETTYPURESS" target="_blank">
<i class="fab fa-tiktok"></i>
</a>

<a href="https://www.facebook.com/PrettyPuress" target="_blank">
<i class="fab fa-facebook"></i>
</a>

</div>
<!-- ================= ADMIN SIZE CALCULATOR ================= -->

<section style="padding:40px 20px;">

<div id="adminLock" style="text-align:center; max-width:300px; margin:auto;">
  <input type="password" id="adminPin" placeholder="Admin PIN">
  <button onclick="unlockCalculator()">Unlock Calculator</button>
</div>

<div id="sizeCalculator" class="calculator-box grid-layout" style="display:none;">
<div class="admin-card">

<h3>Private Nail Size Converter</h3>

<label>From Shape</label>
<select id="fromShape"></select>

<label>From Length</label>
<select id="fromLength"></select>

<label>From Size</label>
<select id="fromSize"></select>

<hr>

<label>To Shape</label>
<select id="toShape"></select>

<label>To Length</label>
<select id="toLength"></select>

<br><br>

<button onclick="convertSize()">Convert Size</button>

<p id="result"></p>

<hr>
</div>
<div class="admin-card">
<h4>Save Customer Sizing</h4>
  <h5>Left Hand (Thumb → Pinky)</h5>

<div class="finger-row">

  <div class="finger-wrap">
    <div class="finger-label">Thumb</div>
    <input id="l1">
  </div>

  <div class="finger-wrap">
    <div class="finger-label">Index</div>
    <input id="l2">
  </div>

  <div class="finger-wrap">
    <div class="finger-label">Middle</div>
    <input id="l3">
  </div>

  <div class="finger-wrap">
    <div class="finger-label">Ring</div>
    <input id="l4">
  </div>

  <div class="finger-wrap">
    <div class="finger-label">Pinky</div>
    <input id="l5">
  </div>

</div>


<h5>Right Hand (Thumb → Pinky)</h5>

<div class="finger-row">

  <div class="finger-wrap">
    <div class="finger-label">Thumb</div>
    <input id="r1">
  </div>

  <div class="finger-wrap">
    <div class="finger-label">Index</div>
    <input id="r2">
  </div>

  <div class="finger-wrap">
    <div class="finger-label">Middle</div>
    <input id="r3">
  </div>

  <div class="finger-wrap">
    <div class="finger-label">Ring</div>
    <input id="r4">
  </div>

  <div class="finger-wrap">
    <div class="finger-label">Pinky</div>
    <input id="r5">
  </div>

</div>

<input type="text" id="customerName" placeholder="Customer Name">

<select id="customerShape">
  <option value="">Original Shape</option>
</select>

<select id="customerLength">
  <option value="">Original Length</option>
</select>
<h5>Left Hand</h5>

<h5>Right Hand</h5>


<button onclick="saveCustomer()">Save Customer</button>
</div>

<div class="admin-card">
<h4>Load Customer Profile</h4>
  <select id="profileTargetShape"></select>
<select id="profileTargetLength"></select>


<select id="customerList"></select>

<button onclick="loadCustomer()">Load Profile</button>

<button onclick="convertFullSet()">Convert Full Set</button>

<button onclick="deleteCustomer()" style="background:#9b0000;color:white;">Delete Customer</button>

<p id="loadedCustomer"></p>

<p id="convertedResult"></p>
</div>
  
<button onclick="exportPDF()">Export Packing Slip</button>


</div>

</section>

<footer>
<p>© 2026 PrettyPuress</p>
</footer>

<!-- ================= LIGHTBOX SCRIPT ================= -->

<script>
function openLightbox(src) {
  document.getElementById("lightbox").style.display = "flex";
  document.getElementById("lightbox-img").src = src;
}

function closeLightbox() {
  document.getElementById("lightbox").style.display = "none";
}
  
</script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
  const firebaseConfig = {
  apiKey: "AIzaSyAajwXKY-rqCBdL3QbMSNvyGslh_XSx7DM",
  authDomain: "prettypuressadmin.firebaseapp.com",
  projectId: "prettypuressadmin",
  storageBucket: "prettypuressadmin.appspot.com",
  messagingSenderId: "765660433192",
  appId: "1:765660433192:web:5e6d7b5348ae8aee949e1d"
};

  firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

db.settings({
  experimentalForceLongPolling: true,
  merge: true
});
const customerList = document.getElementById("customerList");
const loadedCustomer = document.getElementById("loadedCustomer");
const convertedResult = document.getElementById("convertedResult");
const customerName = document.getElementById("customerName");

const l1=document.getElementById("l1");
const l2=document.getElementById("l2");
const l3=document.getElementById("l3");
const l4=document.getElementById("l4");
const l5=document.getElementById("l5");

const r1=document.getElementById("r1");
const r2=document.getElementById("r2");
const r3=document.getElementById("r3");
const r4=document.getElementById("r4");
const r5=document.getElementById("r5");

// ===== ADMIN LOCK =====

const ADMIN_PIN = "101396"; // CHANGE THIS

function unlockCalculator() {

  const entered = document.getElementById("adminPin").value.trim();

  console.log("Entered PIN:", entered);

  if (entered === ADMIN_PIN) {

    document.getElementById("adminLock").style.display = "none";
    document.getElementById("sizeCalculator").style.display = "block";

  } else {

    alert("Incorrect PIN — Try again");

  }
}

// ===== DATA =====

const nailData = {

Almond:{
Short:{"00":14.5,"0":13.5,"1":12,"2":11.5,"3":10.5,"4":10,"4.5":9.7,"5":9.2,"5.5":8.8,"6":8.5,"6.5":8.2,"7":8,"8":7,"9":6.5},
Medium:{"00":14,"0":13.5,"1":12.5,"2":11.5,"3":10,"4":9.7,"4.5":9.5,"5":9,"5.5":8.8,"6":8.2,"6.5":8,"7":7.5,"8":7,"9":6.5},
Long:{"00":13,"0":12,"1":11,"2":10.5,"3":10,"4":9.5,"4.5":9,"5":8.5,"5.5":8.2,"6":8,"6.5":7.5,"7":7,"8":6.5,"9":6.2}
},

Square:{
Short:{"00":13.5,"0":12.5,"1":12,"2":11,"3":10,"4":9.7,"4.5":9.5,"5":9.3,"5.5":9,"6":8.3,"6.5":8,"7":7.5,"8":7,"9":6.5},
Medium:{"00":13.5,"0":13,"1":12.5,"2":11,"3":10.5,"4":10,"4.5":9.5,"5":9.2,"5.5":9,"6":8.5,"6.5":8.2,"7":8,"8":7,"9":6.5},
Long:{"00":13.5,"0":12.5,"1":12,"2":11.5,"3":11,"4":10,"4.5":9.7,"5":9.5,"5.5":9.2,"6":9,"6.5":8,"7":7.5,"8":7,"9":6.5}
},

Coffin:{
Short:{"00":14,"0":13,"1":12.5,"2":11,"3":10.5,"4":10.2,"4.5":10,"5":9.5,"5.5":9,"6":8.7,"6.5":8.5,"7":8,"8":7.5,"9":6.5},
Medium:{"00":13.7,"0":13,"1":12.4,"2":11.6,"3":11,"4":10.3,"4.5":9.8,"5":10,"5.5":9.2,"6":8.9,"6.5":8,"7":8.3,"8":7.5,"9":6.6},
Long:{"00":14,"0":13,"1":12.5,"2":11.6,"3":11.2,"4":10.4,"4.5":10.2,"5":9.9,"5.5":9.5,"6":9,"6.5":8.8,"7":8.5,"8":7.5,"9":7.1}
},

Round:{
Short:{"00":14,"0":13.5,"1":12.5,"2":11.5,"3":11,"4":10.5,"4.5":10,"5":9.5,"5.5":9,"6":8.8,"6.5":8,"7":7.5,"8":7,"9":6.5},
Medium:{"00":13.5,"0":13,"1":12.5,"2":11.5,"3":11,"4":9.8,"4.5":9.5,"5":9,"5.5":8.5,"6":8.2,"6.5":8,"7":7.5,"8":7,"9":6.5},
Long:{"00":14,"0":13,"1":12.5,"2":12,"3":11,"4":10,"4.5":9.5,"5":9,"5.5":8.7,"6":8.5,"6.5":8,"7":7.8,"8":7.3,"9":6.5}
},
Stiletto:{
Medium:{
"00":12.5,"0":12,"1":11.5,"2":11,"3":10.5,"4":10,"4.5":9.8,"5":9.2,"5.5":9,"6":8.5,"6.5":8,"7":7.8,"8":7,"9":6.5
},
Long:{
"00":13,"0":12.5,"1":11.8,"2":11,"3":10.2,"4":9.8,"4.5":9.5,"5":9,"5.5":8.7,"6":8.5,"6.5":8,"7":7.5,"8":7,"9":6.5
}
},

};


// ===== DROPDOWNS =====
const profileTargetShape = document.getElementById("profileTargetShape");
const profileTargetLength = document.getElementById("profileTargetLength");
const fromShape=document.getElementById("fromShape");
const fromLength=document.getElementById("fromLength");
const fromSize=document.getElementById("fromSize");
const toShape=document.getElementById("toShape");
const toLength=document.getElementById("toLength");

const customerShape = document.getElementById("customerShape");
const customerLength = document.getElementById("customerLength");

// Populate shape dropdowns

Object.keys(nailData).forEach(shape=>{
  fromShape.add(new Option(shape,shape));
  toShape.add(new Option(shape,shape));
  customerShape.add(new Option(shape,shape));
  profileTargetShape.add(new Option(shape,shape));
});
profileTargetShape.onchange = ()=>{
  profileTargetLength.innerHTML="";
  Object.keys(nailData[profileTargetShape.value]).forEach(len=>{
    profileTargetLength.add(new Option(len,len));
  });
};

// Populate customer length dropdown

customerShape.onchange = () => {
  customerLength.innerHTML = "<option value=''>Original Length</option>";
  Object.keys(nailData[customerShape.value]).forEach(len=>{
    customerLength.add(new Option(len,len));
  });
};

// Normal converter dropdown logic

fromShape.onchange=()=>{
  fromLength.innerHTML="";
  Object.keys(nailData[fromShape.value]).forEach(l=>{
    fromLength.add(new Option(l,l));
  });
  fromLength.dispatchEvent(new Event("change"));
};

fromLength.onchange=()=>{
  fromSize.innerHTML="";
  Object.keys(nailData[fromShape.value][fromLength.value]).forEach(s=>{
    fromSize.add(new Option(s,s));
  });
};

toShape.onchange=()=>{
  toLength.innerHTML="";
  Object.keys(nailData[toShape.value]).forEach(l=>{
    toLength.add(new Option(l,l));
  });
};

// ===== CONVERT =====

function convertSize(){
  if (
  (fromShape.value === "Stiletto" && fromLength.value === "Short") ||
  (toShape.value === "Stiletto" && toLength.value === "Short")
) {
  alert("Stiletto Short is not available.");
  return;
}

  const mm=nailData[fromShape.value][fromLength.value][fromSize.value];
  const target=nailData[toShape.value][toLength.value];

  let best=null, diff=999;

  for(let s in target){
    let d=Math.abs(target[s]-mm);
    if(d<diff){diff=d;best=s;}
  }

result.innerHTML=`${mm}mm → Size ${best} (${target[best]}mm)`;
}

// ===== CUSTOMER STORAGE =====
function saveCustomer() {

  const name = customerName.value.trim();

  const left = [
    l1.value, l2.value, l3.value, l4.value, l5.value
  ];

  const right = [
    r1.value, r2.value, r3.value, r4.value, r5.value
  ];

  const shape = customerShape.value;
  const length = customerLength.value;

  if (!name || left.includes("") || right.includes("") || !shape || !length) {
    alert("Fill all fields");
    return;
  }

  db.collection("customers").doc(name).set({
    left,
    right,
    shape,
    length,
    updated: new Date()
  }).then(() => {
  alert("Saved to cloud ✅");
  loadCustomerList();
}).catch((error) => {
  console.error("Firestore save error:", error);
  alert("Save failed — check console");
});
}




// ===== LOAD CUSTOMER DROPDOWN =====

function loadCustomerList() {

const dropdown = customerList;
  dropdown.innerHTML = "";

  db.collection("customers").get().then(snapshot => {

    snapshot.forEach(doc => {
      dropdown.add(new Option(doc.id, doc.id));
    });

  });
}


// ===== CUSTOMER SEARCH =====



// ===== LOAD PROFILE =====

function loadCustomer() {

  const selected = customerList.value;
  if (!selected) return;

  db.collection("customers").doc(selected).get().then(doc => {

    if (!doc.exists) return;

    const data = doc.data();

    loadedCustomer.innerHTML =
      `Loaded: ${selected}<br>
       Original: ${data.shape} ${data.length}<br>
       Left: ${data.left.join(", ")}<br>
       Right: ${data.right.join(", ")}`;
  });
}

  
// ===== FULL SET CONVERSION =====

function convertFullSet() {

  const selected = customerList.value;
  if (!selected) {
    alert("Select customer first");
    return;
  }

  const targetShape = profileTargetShape.value;
  const targetLength = profileTargetLength.value;

  if (!targetShape || !targetLength) {
    alert("Select target shape and length");
    return;
  }

  db.collection("customers").doc(selected).get().then(doc => {

    if (!doc.exists) return;

    const profile = doc.data();

    function convertHand(hand) {

      return hand.map(size => {

        const mm = nailData[profile.shape][profile.length][size];
        const targetSet = nailData[targetShape][targetLength];

        let best = null;
        let diff = 999;

        for (let s in targetSet) {
          let d = Math.abs(targetSet[s] - mm);
          if (d < diff) {
            diff = d;
            best = s;
          }
        }

        return best;

      }).join(", ");

    }

    const newLeft = convertHand(profile.left);
    const newRight = convertHand(profile.right);

    convertedResult.innerHTML =
      `Converted To ${targetShape} ${targetLength}<br>
       Left Hand: ${newLeft}<br>
       Right Hand: ${newRight}`;

  });

}


 
// ===== DELETE CUSTOMER =====

function deleteCustomer() {

  const selected = customerList.value;
  if (!selected) return;

  if (!confirm("Delete customer?")) return;

  db.collection("customers").doc(selected).delete().then(() => {

    alert("Deleted");
    loadCustomerList();
    loadedCustomer.innerHTML="";
    convertedResult.innerHTML="";
  });
}

// Auto load saved customers on page open
loadCustomerList();

// Auto load default dropdown values
fromShape.dispatchEvent(new Event("change"));
toShape.dispatchEvent(new Event("change"));

// ===== EXPORT PDF =====

function exportPDF(){

  const name = customerList.value;
  const content = convertedResult.innerText;

  if(!name || !content){
    alert("Convert a customer first");
    return;
  }

  const win = window.open('', '', 'width=600,height=600');
  win.document.write(`
    <h2>Pretty Puress Packing Slip</h2>
    <p><strong>Client:</strong> ${name}</p>
    <pre>${content}</pre>
  `);
  win.document.close();
  win.print();
}
// ===== AUTO ADVANCE FINGER INPUT =====

const fingerInputs = [
  "l1","l2","l3","l4","l5",
  "r1","r2","r3","r4","r5"
];

fingerInputs.forEach((id, index) => {

  const input = document.getElementById(id);

  if(!input) return;

  input.addEventListener("input", () => {

    if (input.value.length >= 1) {

      const next = fingerInputs[index + 1];

      if (next) {
        document.getElementById(next).focus();
      }

    }

  });

});

</script>

</body>
</html>
